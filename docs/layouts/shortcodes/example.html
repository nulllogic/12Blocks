{{- /*
Usage: `example args`

`args` are all optional and can be one of the following:
* id: the `div`'s id - default: ""
* class: any extra class(es) to be added to the `div` - default: ""
* show_preview: if the preview should be output in the HTML - default: `true`
* show_markup: if the markup should be output in the HTML - default: `true`
*/ -}}

{{- $id := .Get "id" -}}
{{- $class := .Get "class" -}}
{{- $lang := .Get "lang" | default "html" -}}
{{- $show_preview := .Get "show_preview" | default true -}}
{{- $show_markup := .Get "show_markup" | default true -}}
{{- $input := .Inner -}}

<div class="code-example">
    {{- if eq $show_preview true -}}
    <div{{ with $id }} id="{{ . }}"{{ end }} class="example-preview{{ with $class }} {{ . }}{{ end }}">
    {{- $input -}}
</div>
{{- end -}}

{{- if eq $show_markup true -}}
{{- if eq $show_preview true -}}
<div class="d-flex align-items-start toolbar highlight">
    <small class="font-monospace language text-uppercase">{{- $lang -}}</small>
    <div class="d-flex ms-auto">
        <button type="button" class="btn btn-link btn-clipboard" title="Copy to clipboard">
            <svg id="Layer_1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 426.667 426.667" xml:space="preserve" aria-label="Copy"><g><g><path d="M383.168,113.227c-0.537-1.284-1.319-2.451-2.304-3.435L274.197,3.125c-2.002-1.991-4.707-3.114-7.531-3.125H96c-5.891,0-10.667,4.776-10.667,10.667v32h-32c-5.891,0-10.667,4.776-10.667,10.667V416c0,5.891,4.776,10.667,10.667,10.667h277.333c5.891,0,10.667-4.776,10.667-10.667v-32h32c5.891,0,10.667-4.776,10.667-10.667v-256C383.997,115.923,383.714,114.527,383.168,113.227z M277.333,36.416l70.251,70.251h-70.251V36.416z M320,405.333H64V64h21.333v309.333C85.333,379.224,90.109,384,96,384h224V405.333z M362.667,362.667h-256V21.333H256v96c0,5.891,4.776,10.667,10.667,10.667h96V362.667z"/></g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>
            Copy
        </button>
    </div>
</div>
{{- end -}}

{{- $content := replaceRE `<svg class="bd-placeholder-img(?:-lg)?(?: *?bd-placeholder-img-lg)? ?(.*?)".*?<\/svg>\n` `<img src="..." class="$1" alt="...">` $input -}}
{{- $content = replaceRE ` (class=" *?")` "" $content -}}
{{- highlight (trim $content "\n") $lang "" -}}
{{- end -}}
</div>
