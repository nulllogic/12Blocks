@use "sass:meta";
@use '../../functions' as functions;
@use '../../mixins/generators/color-sheme' as mixin;

@mixin generate-subclasses($prefix, $tag, $properties) {
  @each $property, $values in $properties {
    #{$property} {
      @each $val, $value in $values {

      }
    }
  }
}

@mixin generate-properties($tag, $properties, $config) {
  $prefix: functions.get-config($config, 'prefix');

  @each $property, $value in $properties {

    // Variables
    @if (str-index($property, '--') == 1) {
      --#{$prefix}-#{$tag}-#{functions.str-replace($property, '--', '')} : #{meta.inspect($value)};
    }

    // Colors properties
    @if ($property == 'colors') {

      @each $color, $color-properties in $value {
        @each $scheme in functions.str-split(functions.get-config($config, 'color-scheme'), ' ') {
          @if $scheme == $color {
            @include mixin.generate-color-scheme($color) {
              @each $color-property, $color-value in $color-properties {
                --#{$prefix}-#{$tag}-#{functions.str-replace($color-property, '--', '')}: #{meta.inspect($color-value)};
              }
            }
          }
        }
      }
    }

    // Pseudo elements properties
    @if ($property == 'pseudo') {

    }

    // Attributes elements properties
    @if ($property == 'attributes') {

    }

    // Attributes elements properties
    @if ($property == 'subclasses') {
      @include generate-subclasses($prefix, $tag, $value);
    }

    // All other elements
    @if (
      $property != 'pseudo' and
      $property != 'colors' and
      $property != 'attributes' and
      $property != 'subclasses' and
      str-index($property, '--') != 1 and
      $property != 'dark' and
      $property != 'light'
    ) {

      @if (type-of($value) == 'string' and str-index($value, 'var(--') == 1) {
        #{$property} : #{meta.inspect(functions.str-replace($value,'--','--' + $prefix + '-'))};
      } @else {
        #{$property} : #{meta.inspect($value)};
      }
    }

  }
}
